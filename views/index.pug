doctype html
html
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1')
    title layout 后台大布局 - Layui
    link(rel='stylesheet', href='/layui/css/layui.css')
    link(rel='stylesheet', href='/stylesheets/style.css')
  body.layui-layout-body
    #LAY_app.layadmin-tabspage-none
      .layui-layout.layui-layout-admin
        .layui-header
          ul.layui-nav.layui-layout-left
            li.layui-nav-item.layui-hide-xs(lay-unselect='')
              input.layui-input.layui-input-search(type='text', placeholder='搜索...', autocomplete='off', layadmin-event='serach', lay-action='template/search/keywords=')
        .layui-side.layui-side-menu
          .layui-side-scroll
            .layui-logo 数据管理
            ul#LAY-system-side-menu.layui-nav.layui-nav-tree(lay-shrink='all', lay-filter='layadmin-system-side-menu')
              li.layui-nav-item.layui-nav-itemed(data-name='', data-jump='')
                a(href='javascript:;', lay-tips='主页', lay-direction='2')
                  i.layui-icon.layui-icon-home
                  cite 主页
                  span.layui-nav-more
                dl.layui-nav-child
                  dd.layui-this(data-name='', data-jump='/')
                    a(href='javascript:;', lay-href='/') 控制台
                  dd(data-name='homepage1', data-jump='home/homepage1')
                    a(href='javascript:;', lay-href='home/homepage1') 主页一
                  dd(data-name='homepage2', data-jump='home/homepage2')
                    a(href='javascript:;', lay-href='home/homepage2') 主页二
              li.layui-nav-item(data-name='component', data-jump='')
                a(href='javascript:;', lay-tips='组件', lay-direction='2')
                  i.layui-icon.layui-icon-component
                  cite 组件
                  span.layui-nav-more
                dl.layui-nav-child
                  dd(data-name='grid', data-jump='')
                    a(href='javascript:;')
                      | 栅格
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='list', data-jump='')
                        a(href='javascript:;', lay-href='component/grid/list') 等比例列表排列
                      dd(data-name='mobile', data-jump='')
                        a(href='javascript:;', lay-href='component/grid/mobile') 按移动端排列
                      dd(data-name='mobile-pc', data-jump='')
                        a(href='javascript:;', lay-href='component/grid/mobile-pc') 移动桌面端组合
                      dd(data-name='all', data-jump='')
                        a(href='javascript:;', lay-href='component/grid/all') 全端复杂组合
                      dd(data-name='stack', data-jump='')
                        a(href='javascript:;', lay-href='component/grid/stack') 低于桌面堆叠排列
                      dd(data-name='speed-dial', data-jump='')
                        a(href='javascript:;', lay-href='component/grid/speed-dial') 九宫格
                  dd(data-name='button', data-jump='')
                    a(href='javascript:;', lay-href='component/button/') 按钮
                  dd(data-name='form', data-jump='')
                    a(href='javascript:;')
                      | 表单
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='element', data-jump='')
                        a(href='javascript:;', lay-href='component/form/element') 表单元素
                      dd(data-name='group', data-jump='')
                        a(href='javascript:;', lay-href='component/form/group') 表单组合
                  dd(data-name='nav', data-jump='')
                    a(href='javascript:;', lay-href='component/nav/') 导航
                  dd(data-name='tabs', data-jump='')
                    a(href='javascript:;', lay-href='component/tabs/') 选项卡
                  dd(data-name='progress', data-jump='')
                    a(href='javascript:;', lay-href='component/progress/') 进度条
                  dd(data-name='panel', data-jump='')
                    a(href='javascript:;', lay-href='component/panel/') 面板
                  dd(data-name='badge', data-jump='')
                    a(href='javascript:;', lay-href='component/badge/') 徽章
                  dd(data-name='timeline', data-jump='')
                    a(href='javascript:;', lay-href='component/timeline/') 时间线
                  dd(data-name='anim', data-jump='')
                    a(href='javascript:;', lay-href='component/anim/') 动画
                  dd(data-name='auxiliar', data-jump='')
                    a(href='javascript:;', lay-href='component/auxiliar/') 辅助
                  dd(data-name='layer', data-jump='')
                    a(href='javascript:;')
                      | 通用弹层
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='list', data-jump='')
                        a(href='javascript:;', lay-href='component/layer/list') 功能演示
                      dd(data-name='special-demo', data-jump='')
                        a(href='javascript:;', lay-href='component/layer/special-demo') 特殊示例
                      dd(data-name='theme', data-jump='')
                        a(href='javascript:;', lay-href='component/layer/theme') 风格定制
                  dd(data-name='laydate', data-jump='')
                    a(href='javascript:;')
                      | 日期时间
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='demo1', data-jump='')
                        a(href='javascript:;', lay-href='component/laydate/demo1') 功能演示一
                      dd(data-name='demo2', data-jump='')
                        a(href='javascript:;', lay-href='component/laydate/demo2') 功能演示二
                      dd(data-name='theme', data-jump='')
                        a(href='javascript:;', lay-href='component/laydate/theme') 设定主题
                      dd(data-name='special-demo', data-jump='')
                        a(href='javascript:;', lay-href='component/laydate/special-demo') 特殊示例
                  dd(data-name='table', data-jump='')
                    a(href='javascript:;')
                      | 表格
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='simple', data-jump='')
                        a(href='javascript:;', lay-href='component/table/simple') 简单数据表格
                      dd(data-name='auto', data-jump='')
                        a(href='javascript:;', lay-href='component/table/auto') 列宽自动分配
                      dd(data-name='data', data-jump='')
                        a(href='javascript:;', lay-href='component/table/data') 赋值已知数据
                      dd(data-name='tostatic', data-jump='')
                        a(href='javascript:;', lay-href='component/table/tostatic') 转化静态表格
                      dd(data-name='page', data-jump='')
                        a(href='javascript:;', lay-href='component/table/page') 开启分页
                      dd(data-name='resetPage', data-jump='')
                        a(href='javascript:;', lay-href='component/table/resetPage') 自定义分页
                      dd(data-name='height', data-jump='')
                        a(href='javascript:;', lay-href='component/table/height') 高度最大适应
                      dd(data-name='checkbox', data-jump='')
                        a(href='javascript:;', lay-href='component/table/checkbox') 开启复选框
                      dd(data-name='cellEdit', data-jump='')
                        a(href='javascript:;', lay-href='component/table/cellEdit') 开启单元格编辑
                      dd(data-name='form', data-jump='')
                        a(href='javascript:;', lay-href='component/table/form') 加入表单元素
                      dd(data-name='style', data-jump='')
                        a(href='javascript:;', lay-href='component/table/style') 设置单元格样式
                      dd(data-name='fixed', data-jump='')
                        a(href='javascript:;', lay-href='component/table/fixed') 固定列
                      dd(data-name='operate', data-jump='')
                        a(href='javascript:;', lay-href='component/table/operate') 数据操作
                      dd(data-name='reload', data-jump='')
                        a(href='javascript:;', lay-href='component/table/reload') 数据表格的重载
                      dd(data-name='initSort', data-jump='')
                        a(href='javascript:;', lay-href='component/table/initSort') 设置初始排序
                      dd(data-name='cellEvent', data-jump='')
                        a(href='javascript:;', lay-href='component/table/cellEvent') 监听单元格事件
                      dd(data-name='thead', data-jump='')
                        a(href='javascript:;', lay-href='component/table/thead') 复杂表头
                  dd(data-name='laypage', data-jump='')
                    a(href='javascript:;')
                      | 分页
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='demo1', data-jump='')
                        a(href='javascript:;', lay-href='component/laypage/demo1') 功能演示一
                      dd(data-name='demo2', data-jump='')
                        a(href='javascript:;', lay-href='component/laypage/demo2') 功能演示二
                  dd(data-name='upload', data-jump='')
                    a(href='javascript:;')
                      | 上传
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='demo1', data-jump='')
                        a(href='javascript:;', lay-href='component/upload/demo1') 功能演示一
                      dd(data-name='demo2', data-jump='')
                        a(href='javascript:;', lay-href='component/upload/demo2') 功能演示二
                  dd(data-name='rate', data-jump='')
                    a(href='javascript:;', lay-href='component/rate/') 评分
                  dd(data-name='carousel', data-jump='')
                    a(href='javascript:;', lay-href='component/carousel/') 轮播
                  dd(data-name='flow', data-jump='')
                    a(href='javascript:;', lay-href='component/flow/') 流加载
                  dd(data-name='util', data-jump='')
                    a(href='javascript:;', lay-href='component/util/') 工具
                  dd(data-name='code', data-jump='')
                    a(href='javascript:;', lay-href='component/code/') 代码修饰
                  dd(data-name='layim', data-jump='senior/im/')
                    a(href='javascript:;', lay-href='senior/im/') 即时聊天
              li.layui-nav-item(data-name='template', data-jump='')
                a(href='javascript:;', lay-tips='页面', lay-direction='2')
                  i.layui-icon.layui-icon-template
                  cite 页面
                  span.layui-nav-more
                dl.layui-nav-child
                  dd(data-name='personalpage', data-jump='template/personalpage')
                    a(href='javascript:;', lay-href='template/personalpage') 个人主页
                  dd(data-name='addresslist', data-jump='template/addresslist')
                    a(href='javascript:;', lay-href='template/addresslist') 通讯录
                  dd(data-name='goodslist', data-jump='template/goodslist')
                    a(href='javascript:;', lay-href='template/goodslist') 商品列表
                  dd(data-name='msgboard', data-jump='template/msgboard')
                    a(href='javascript:;', lay-href='template/msgboard') 留言板
                  dd(data-name='search', data-jump='template/search')
                    a(href='javascript:;', lay-href='template/search') 搜索结果
                  dd(data-name='reg', data-jump='user/reg')
                    a(href='javascript:;', lay-href='user/reg') 注册
                  dd(data-name='login', data-jump='user/login')
                    a(href='javascript:;', lay-href='user/login') 登入
                  dd(data-name='forget', data-jump='user/forget')
                    a(href='javascript:;', lay-href='user/forget') 忘记密码
                  dd(data-name='404', data-jump='template/tips/404')
                    a(href='javascript:;', lay-href='template/tips/404') 404
                  dd(data-name='error', data-jump='template/tips/error')
                    a(href='javascript:;', lay-href='template/tips/error') 错误提示
                  dd.layui-nav-itemed(data-name='', data-jump='')
                    a(href='javascript:;')
                      | 内嵌页面
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='', data-jump='/iframe/link/baidu')
                        a(href='javascript:;', lay-href='/iframe/link/baidu') 百度一下
                      dd(data-name='', data-jump='/iframe/link/layui')
                        a(href='javascript:;', lay-href='/iframe/link/layui') layui官网
                      dd(data-name='', data-jump='/iframe/link/layuiAdmin')
                        a(href='javascript:;', lay-href='/iframe/link/layuiAdmin') layuiAdmin官网
              li.layui-nav-item(data-name='app', data-jump='')
                a(href='javascript:;', lay-tips='应用', lay-direction='2')
                  i.layui-icon.layui-icon-app
                  cite 应用
                  span.layui-nav-more
                dl.layui-nav-child
                  dd(data-name='content', data-jump='')
                    a(href='javascript:;')
                      | 内容系统
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='list', data-jump='')
                        a(href='javascript:;', lay-href='app/content/list') 文章列表
                      dd(data-name='tags', data-jump='')
                        a(href='javascript:;', lay-href='app/content/tags') 分类管理
                      dd(data-name='comment', data-jump='')
                        a(href='javascript:;', lay-href='app/content/comment') 评论管理
                  dd(data-name='forum', data-jump='')
                    a(href='javascript:;')
                      | 社区系统
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='list', data-jump='')
                        a(href='javascript:;', lay-href='app/forum/list') 帖子列表
                      dd(data-name='replys', data-jump='')
                        a(href='javascript:;', lay-href='app/forum/replys') 回帖列表
                  dd(data-name='message', data-jump='')
                    a(href='javascript:;', lay-href='app/message/') 消息中心
                  dd(data-name='workorder', data-jump='app/workorder/list')
                    a(href='javascript:;', lay-href='app/workorder/list') 工单系统
              li.layui-nav-item(data-name='senior', data-jump='')
                a(href='javascript:;', lay-tips='高级', lay-direction='2')
                  i.layui-icon.layui-icon-senior
                  cite 高级
                  span.layui-nav-more
                dl.layui-nav-child
                  dd(data-name='im', data-jump='')
                    a(href='javascript:;', lay-href='senior/im/') 通讯系统
                  dd(data-name='echarts', data-jump='')
                    a(href='javascript:;')
                      | Echarts集成
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='line', data-jump='')
                        a(href='javascript:;', lay-href='senior/echarts/line') 折线图
                      dd(data-name='bar', data-jump='')
                        a(href='javascript:;', lay-href='senior/echarts/bar') 柱状图
                      dd(data-name='map', data-jump='')
                        a(href='javascript:;', lay-href='senior/echarts/map') 地图
              li.layui-nav-item(data-name='user', data-jump='')
                a(href='javascript:;', lay-tips='用户', lay-direction='2')
                  i.layui-icon.layui-icon-user
                  cite 用户
                  span.layui-nav-more
                dl.layui-nav-child
                  dd(data-name='user', data-jump='user/user/list')
                    a(href='javascript:;', lay-href='user/user/list') 网站用户
                  dd(data-name='administrators-list', data-jump='user/administrators/list')
                    a(href='javascript:;', lay-href='user/administrators/list') 后台管理员
                  dd(data-name='administrators-rule', data-jump='user/administrators/role')
                    a(href='javascript:;', lay-href='user/administrators/role') 角色管理
              li.layui-nav-item(data-name='set', data-jump='')
                a(href='javascript:;', lay-tips='设置', lay-direction='2')
                  i.layui-icon.layui-icon-set
                  cite 设置
                  span.layui-nav-more
                dl.layui-nav-child
                  dd.layui-nav-itemed(data-name='system', data-jump='')
                    a(href='javascript:;')
                      | 系统设置
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='website', data-jump='')
                        a(href='javascript:;', lay-href='set/system/website') 网站设置
                      dd(data-name='email', data-jump='')
                        a(href='javascript:;', lay-href='set/system/email') 邮件服务
                  dd.layui-nav-itemed(data-name='user', data-jump='')
                    a(href='javascript:;')
                      | 我的设置
                      span.layui-nav-more
                    dl.layui-nav-child
                      dd(data-name='info', data-jump='')
                        a(href='javascript:;', lay-href='set/user/info') 基本资料
                      dd(data-name='password', data-jump='')
                        a(href='javascript:;', lay-href='set/user/password') 修改密码
              li.layui-nav-item(data-name='get', data-jump='system/get')
                a(href='javascript:;', lay-href='system/get', lay-tips='授权', lay-direction='2')
                  i.layui-icon.layui-icon-auz
                  cite 授权
        .layui-body
          .layui-card.layadmin-header
            .layui-breadcrumb(lay-filter='breadcrumb', style='visibility: visible;')
              a(lay-href='') 主页
              span(lay-separator='') /
              a
                cite 用户
              span(lay-separator='') /
              a
                cite 后台管理员
          .layui-fluid
            .layui-card
              table#test.layui-hide(lay-filter="test")
                script#toolbarDemo(type='text/html').
                  <div class="layui-btn-container">
                  <button class="layui-btn layui-btn-sm" lay-event="getCheckData">获取选中行数据</button>
                  <button class="layui-btn layui-btn-sm" lay-event="getCheckLength">获取选中数目</button>
                  <button class="layui-btn layui-btn-sm" lay-event="isAll">验证是否全选</button>
                  </div>
                script#barDemo(type='text/html').
                  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
                  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
    script(src='/layui/layui.js')
    script.
      layui.use('element', function(){
        var element = layui.element;
      });
      layui.use('table', function(){
        var table = layui.table;
        table.render({
          elem: '#test'
          ,url: '/index/list'
          ,height:'full-130'
          ,toolbar: '#toolbarDemo'
          ,title: '用户数据表'
          ,page: {
            limit: 5,
            curr: 1
          }
          ,cols: [[
            {type: 'checkbox', fixed: 'left'}
            ,{field:'_id', title:'ID', fixed: 'left', unresize: true, sort: true}
            ,{field:'original_source_name', title:'来源'}
            ,{field:'title', title:'标题', }
            ,{field:'author', title:'作者'}
            ,{field:'publish_time', title:'发布时间'}
            ,{field:'url', title:'URL', templet: function(res){
              return '<a target="_blank" href="'+ res.url +'">'+ res.url+'</a>'
            }}
            ,{fixed: 'right', title:'操作', toolbar: '#barDemo'}
          ]]
        });
        
        //头工具栏事件
        table.on('toolbar(test)', function(obj){
          var checkStatus = table.checkStatus(obj.config.id);
          switch(obj.event){
            case 'getCheckData':
              var data = checkStatus.data;
              layer.alert(JSON.stringify(data));
            break;
            case 'getCheckLength':
              var data = checkStatus.data;
              layer.msg('选中了：'+ data.length + ' 个');
            break;
            case 'isAll':
              layer.msg(checkStatus.isAll ? '全选': '未全选');
            break;
          };
        });
        
        //监听行工具事件
        table.on('tool(test)', function(obj){
          var data = obj.data;
          //console.log(obj)
          if(obj.event === 'del'){
            layer.confirm('真的删除行么', function(index){
              obj.del();
              layer.close(index);
            });
          } else if(obj.event === 'edit'){
            layer.open({
              type: 2,
              area: ['800px', '650px'],
              fixed: true, //不固定
              maxmin: false,
              resize: false,
              content: '/editor?_id='+obj.data._id
            });
          }
        });
      });
    style.
      .layui-side-menu,.layadmin-pagetabs .layui-tab-title li:after,.layadmin-pagetabs .layui-tab-title li.layui-this:after,.layui-layer-admin .layui-layer-title,.layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child{background-color:#20222A !important;}.layui-nav-tree .layui-this,.layui-nav-tree .layui-this>a,.layui-nav-tree .layui-nav-child dd.layui-this,.layui-nav-tree .layui-nav-child dd.layui-this a{background-color:#009688 !important;}.layui-layout-admin .layui-logo{background-color:#20222A !important;}
